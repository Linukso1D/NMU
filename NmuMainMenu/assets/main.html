<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">  
    <link rel="stylesheet" href="css/style.css">
      <script type="text/javascript" src="js/jquery-1.11.1.js"></script>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
      <script type="text/javascript" src="js/script.js"></script>
</head>
<body>
    <div id="container">
 <canvas id='maincanv'></canvas>
    </div>
<script>
var count;
var divWidth;
var divHeight;
    var x_rel;
    var y_rel;
    function loadCanv(w, h){
        var canvas = document.getElementById("maincanv"),
        ctx       =  canvas.getContext('2d'), // Контекст
        pic       = new Image();              // "Создаём" изображение
         canvas.width = w;
         canvas.height = h;
        // 1%
        x_rel = w/100;
        y_rel = h/100;
        
      pic.src = 'graphics/main_map.png';  // Путь к изображению 
      pic.onload = function() {  
        ctx.drawImage(pic, 0, 0, w, h);  
      }
      function getMousePos(canvas, evt) {
    var rect = canvas.getBoundingClientRect();
    return {
      x: evt.clientX - rect.left,
      y: evt.clientY - rect.top
    };
  }
    canvas.addEventListener('click', function(evt) {
            var x_pos;
            var y_pos;
    var mousePos = getMousePos(canvas, evt);
    var message = 'Mouse position: x-' + mousePos.x + ',y - ' + mousePos.y;
            // Позиция в %
             x_pos = (Math.floor(mousePos.x))/x_rel;
             y_pos = (Math.floor(mousePos.y))/y_rel;
            if( (x_pos > 25 && x_pos < 47) && (y_pos > 32 && y_pos < 54)){
                //1 Корпус
                window.location = 'for1.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
             if( (x_pos > 56 && x_pos < 73) && (y_pos > 32 && y_pos < 37)){
                 //4 Корпус
                window.location = 'for4.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
             if( (x_pos > 24 && x_pos < 44) && (y_pos > 59 && y_pos < 68)){
                 //2 Корпус
                window.location = 'for2.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
             if( (x_pos > 24 && x_pos < 29) && (y_pos > 71 && y_pos < 83)){
                 //7 Корпус
                window.location = 'for7.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
             if( (x_pos > 25 && x_pos < 43) && (y_pos > 85 && y_pos < 97)){
                 //3 Корпус
                window.location = 'for3.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
             if( ((x_pos > 56 && x_pos < 61) && (y_pos > 40 && y_pos < 56))
               || ((x_pos > 56 && x_pos < 67) && (y_pos > 40 && y_pos < 44))){
                 //5 Корпус
                window.location = 'for5.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
             if( (x_pos > 45 && x_pos < 55) && (y_pos > 56 && y_pos < 61)){
                 //10 Корпус
                window.location = 'for10.html?divWidth='+divWidth+'&divHeight='+ divHeight+'&redirect=0';
              }
            console.log('Mouse position: x-' + x_pos + ',y-' +  y_pos);
  }, false);
}
$(document).ready(function(){// по окончанию загрузки страницы

    divWidth = $_GET('divWidth');
    divHeight = $_GET('divHeight');
    loadCanv(divWidth,  divHeight);
    count = $_GET('redirect');
    console.log('cnt - '+count);
}); 
    function $_GET(key) {
    var s = window.location.search;
    s = s.match(new RegExp(key + '=([^&=]+)'));
    return s ? s[1] : false;
}
</script>
</body>
</html>